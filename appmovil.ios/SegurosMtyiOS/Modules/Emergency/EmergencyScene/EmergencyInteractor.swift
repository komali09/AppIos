//
//  EmergencyInteractor.swift
//  SegurosMtyiOS
//
//  Created by Isidro Adan Garcia Solorio  on 12/27/17.
//  Copyright (c) 2017 IA Interactive. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import RxSwift

enum AssistancePhone {
    case withinUSAAndCanada
    case withinRestOfTheWorld
    case withinMexico
    case wihtinRestOfMexico
}

protocol EmergencyBusinessLogic {
    func emergencyPetition(request: Emergency.Emergency.Request)
}

protocol EmergencyDataStore {
    //var myDataStoreVar: String { get set }
}

class EmergencyInteractor: EmergencyBusinessLogic, EmergencyDataStore {
    var presenter: EmergencyPresentationLogic?
    var worker: EmergencyWorker?
    
    var disposableBag: DisposeBag = DisposeBag()
    var result: Int?
    
    func emergencyPetition(request: Emergency.Emergency.Request) {
        worker = EmergencyWorker()
        worker?.emergencyPetition(request.type).subscribe({ [weak self] event in
            switch event {
            case .next:
                let response = Emergency.Emergency.Response(isSuccess: true)
                self?.presenter?.emergencyPetition(response: response)
            default:
                break
            }
        }).disposed(by: self.disposableBag)
    }
}
